@page "/"
@page "/Index"
<PageTitle>SD - Streaming Discovery</PageTitle>

@using SD.WEB.Modules.Profile.Core;
@using SD.WEB.Modules.List.Components;
@using SD.WEB.Modules.Provider.Components;
@using SD.WEB.Modules.News.Components;

@inject WatchedListApi WatchedListApi
@inject WishListApi WishListApi
@inject AppState AppState

<PopularIndexComponent></PopularIndexComponent>

<Row HorizontalGutter="8" VerticalGutter="8">
    <Column ColumnSize="ColumnSize.IsFull.OnMobile.IsHalf.OnDesktop">
        <ProviderComponent></ProviderComponent>
    </Column>
    <Column ColumnSize="ColumnSize.IsFull.OnMobile.IsHalf.OnDesktop">
        <NewsComponent></NewsComponent>
    </Column>
</Row>

@code {
    protected override async Task OnInitializedAsync()
    {
        AppState.ChangeWishList(await WishListApi.Get());
        AppState.ChangeWatchedList(await WatchedListApi.Get());

        await base.OnInitializedAsync();
    }
}