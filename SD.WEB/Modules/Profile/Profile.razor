@page "/profile"
<SeoHeader Title="@SeoTranslations.ProfileTitle" Description="@SeoTranslations.ProfileDescription" Url="/profile"></SeoHeader>
@inherits PageCore<Profile>
@inject IHttpClientFactory httpClientFactory

<MyProviderComponent Fake="Fake"></MyProviderComponent>

<MySuggestions Fake="Fake"></MySuggestions>

<Row HorizontalGutter="8" VerticalGutter="8">
    <Column ColumnSize="ColumnSize.IsFull.OnMobile.IsHalf.OnDesktop">
        <MyWishListComponent></MyWishListComponent>
    </Column>
    <Column ColumnSize="ColumnSize.IsFull.OnMobile.IsHalf.OnDesktop">
        <MyWatchingListComponent Fake="Fake"></MyWatchingListComponent>
    </Column>
</Row>

@code {
    [Parameter][SupplyParameterFromQuery(Name = "Fake")] public bool Fake { get; set; } = false;

    protected override async Task OnInitializedAsync()
    {
        if (Fake)
        {
            var http = httpClientFactory.CreateClient("RetryHttpClient");

            AppState.ChangeWishList(await http.GetFromJsonAsync<WishList>("/data/WishList.json"));
            AppState.ChangeWatchedList(await http.GetFromJsonAsync<WatchedList>("/data/WatchedList.json"));
            AppState.ChangeWatchingList(await http.GetFromJsonAsync<WatchingList>("/data/WatchingList.json"));
        }
    }
}