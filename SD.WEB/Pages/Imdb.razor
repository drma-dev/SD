@page "/Imdb"
@inherits ComponenteCore<Imdb>
@inject Services.IMDB.PopularService PopularService
@inject Services.IMDB.TopRatedService TopRatedService
@inject Services.IMDB.UpcomingService UpcomingService

<HeadPage ImageSource="logo/imdb.png" Text="@TranslationText.imdb_desc" Link="https://www.imdb.com/"></HeadPage>

<CardMediaList @ref="cardPopular" Service="@PopularService" CardHeader="@TranslationText.Popular" IsIMDB="true"></CardMediaList>
<CardMediaList @ref="cardTopRated" Service="@TopRatedService" CardHeader="@TranslationText.TopRated" IsIMDB="true"></CardMediaList>
<CardMediaList @ref="cardUpcoming" Service="@UpcomingService" CardHeader="@TranslationText.ComingSoon" HasFilter="false" ShowOnlyYear="false"></CardMediaList>

@code {
    public CardMediaList? cardPopular { get; set; }
    public CardMediaList? cardTopRated { get; set; }
    public CardMediaList? cardUpcoming { get; set; }

    public MediaType MediaType { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await LoadData();
        }
    }

    protected async Task LoadData()
    {
        await cardPopular.LoadData();
        await cardTopRated.LoadData();
        await cardUpcoming.LoadData();
    }
}